# OLED

## [正点原子 OLED](https://www.bilibili.com/video/BV1Lx411Z7Qa?p=35)

- OLED，即有机发光二极管（Organic Light-Emitting Diode），又称为有机激光显示（Organic Electroluminesence Display，OLED）。
- OLED由于同时具备自发光，不需背光源、对比度高、厚度薄、视角广、反应速度快、可用于饶曲性面板、使用温度范围广、构造及制程较简单等优异之特性，被认为是下一代的平面显示器新兴应用技术
- OLED显示技术具有自发光的特性，采用非常薄的有机材料涂层和玻璃基板，当有电流通过时，这些有机材料就会发光，而且OLED显示屏幕可视角度大，并且能够节省电能，
- LCD需要背光，而OLED不需要，因为它是自发光，这样的显示，OLED效果要好一些。

### ALINETEK 0.96寸OLED模块

1. 模块有单色与双色两种可选，单色为纯蓝色，而双色则为黄蓝双色。单色模块每个像素点只有亮与不亮两种情况，没有颜色区分。
2. 尺寸小，显示尺寸为0.96寸，而模块的尺寸仅为27mm*26mm大小
3. 高分辨率，该模块的分辨率为128*64
4. 多种接口方式，该模块提供了总共4种接口包括：6800、8080两种并行接口方式、4线的串行SPI接口方式，IIC接口方式
5. 不需要高压，直接接3.3V就可以工作了。
   - 该模块不与5.0V接口兼容。

### OLED模块工作模式选择

- 4种模式通过模块的BS1/BS2设置，BS1/BS2的设置与模块接口模式

| 接口方式 | 4线SPI | IIC | 8位6800 | 8位8080 |
| :--: | :--: | :--: | :--: | :--: |
| BS1 | 0 | 1 | 0 | 1 |
| BS2 | 0 | 0 | 1 | 1 |

- OLED 8080并行接口信号线说明
  - CS：OLED片选信号
  - WR：向OLED写入数据
  - RD：从OLED读取数据
  - D[7:0]：8位双向数据线
  - RST（RES）：硬复位OLED
  - DC：命令/数据标志（0读写命令；1读写数据）

- OLED控制器为SSD1306

### OLED 8080并口读写过程

- 模块的8080并口读/写的过程为：先根据要写入/读取的数据类型，设置DC为高（数据）/低（命令），然后拉低片选，选中SSD1306，接着我们根据是读数据，还是要写数据设置RD/WR为低，然后
  - 读数据：在RD的上升沿，使数据锁存到数据线（D[7:0]）
  - 写数据：在WR的上升沿，使数据写入到SSD1306

### 程序显示原理

- 在STM32的内部建立一个缓存（128*8个字节），在每次修改的时候，只是修改STM32上的缓存（实际上就是SRAM），在修改完了之后，一次性把STM32上的缓存数据写入到OLED的GRAM。

### OLED初始化

```C
//初始化SSD1306
void OLED_Init(void)
{
    //设置IO口模式，所有用到的IO口设置为推挽模式
    GPIO_Init();

    //初始化代码，写相关寄存器
    OLED_WR_Byte(0xAE,OLED_CMD);    //关闭显示
    OLED_WR_Byte(0xD5,OLED_CMD);    //设置时钟分频因子，震荡频率
    OLED_WR_Byte(80,OLED_CMD);      //[3:0]分频因子;[7:4]震荡频率
    OLED_WR_Byte(0xA8,OLED_CMD);    //设置驱动路数
    OLED_WR_Byte(0x3F,OLED_CMD);    //默认0x3F(1/64)
    OLED_WR_Byte(0xD3,OLED_CMD);    //设置显示偏移
    OLED_WR_Byte(0x00,OLED_CMD);    //默认为0

    OLED_Clear();
}
```